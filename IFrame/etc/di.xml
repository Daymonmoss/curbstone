<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <!-- Payment Method logger configuration -->
    <type name="Curbstone\IFrame\Helper\LoggerHandler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>
    <virtualType name="CurbstoneIFrameLogger" type="Monolog\Logger">
        <arguments>
            <argument name="name" xsi:type="string">Curbstone IFrame Stack Trace</argument>
            <argument name="handlers" xsi:type="array">
                <item name="system" xsi:type="object">Curbstone\IFrame\Helper\LoggerHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Curbstone\IFrame\Helper\CurbstoneLog">
        <arguments>
            <argument name="logger" xsi:type="object">CurbstoneIFrameLogger</argument>
        </arguments>
    </type>

    <preference for="Magento\Payment\Model\InfoInterface" type="Magento\Payment\Model\Info"/>
    <preference for="Magento\Payment\Gateway\Data\OrderAdapterInterface" type="Magento\Payment\Gateway\Data\Order\OrderAdapter"/>
    <type name="Magento\Payment\Model\Method\Adapter">
        <plugin name="curbstone_method_adapter" type="Curbstone\IFrame\Plugin\MagentoPaymentMethodAdapterInfoInstance" />
    </type>
    <type name="Magento\Sales\Model\Order\Payment\State\CommandInterface">
        <plugin name="curbstone_order_status" type="Curbstone\IFrame\Plugin\CommandInterfacePlugin"/>
    </type>
    <type name="Curbstone\IFrame\Model\Payment\CurbstoneiFrame">
        <arguments>
            <argument name="adapter" xsi:type="object">CurbstoneFacade</argument>
        </arguments>
    </type>

         <!-- Payment Method Facade configuration -->
         <virtualType name="CurbstoneFacade" type="Magento\Payment\Model\Method\Adapter">
             <arguments>
                 <argument name="code" xsi:type="const">Curbstone\IFrame\Model\Ui\ConfigProvider::CODE</argument>
                 <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
                 <argument name="infoBlockType" xsi:type="string">Magento\Payment\Block\Info</argument>
                 <argument name="valueHandlerPool" xsi:type="object">CurbstoneValueHandlerPool</argument>
                 <argument name="validatorPool" xsi:type="object">CurbstoneValidatorPool</argument>
                 <argument name="commandPool" xsi:type="object">CurbstoneCommandPool</argument>
             </arguments>
         </virtualType>
         <!-- Value Handler Pool configuration -->
         <virtualType name="CurbstoneConfig" type="Curbstone\IFrame\Gateway\Config\Config">
             <arguments>
                 <argument name="methodCode" xsi:type="const">Curbstone\IFrame\Model\Ui\ConfigProvider::CODE</argument>
             </arguments>
         </virtualType>
         <virtualType name="CurbstoneConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
             <arguments>
                 <argument name="configInterface" xsi:type="object">CurbstoneConfig</argument>
             </arguments>
         </virtualType>
         <virtualType name="CurbstoneValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
             <arguments>
                 <argument name="handlers" xsi:type="array">
                     <item name="default" xsi:type="string">CurbstoneConfigValueHandler</item>
                 </argument>
             </arguments>
         </virtualType>
         <!-- Validator Pool configuration -->
         <virtualType name="CurbstoneCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
             <arguments>
                 <argument name="config" xsi:type="object">CurbstoneConfig</argument>
             </arguments>
         </virtualType>
         <virtualType name="CurbstoneGlobalValidator" type="Magento\Payment\Gateway\Validator\ValidatorComposite">
             <arguments>
                 <argument name="validators" xsi:type="array">
                     <item name="country" xsi:type="string">CurbstoneCountryValidator</item>
                 </argument>
             </arguments>
         </virtualType>
         <virtualType name="CurbstoneValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
             <arguments>
                 <argument name="validators" xsi:type="array">
                     <item name="global" xsi:type="string">CurbstoneGlobalValidator</item>
                     <item name="availability" xsi:type="string">Curbstone\IFrame\Gateway\Validator\AvailabilityValidator</item>
                 </argument>
             </arguments>
         </virtualType>
         <!-- Command Pool configuration -->
         <virtualType name="CurbstoneCaptureGatewayCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
             <arguments>
                 <argument name="requestBuilder" xsi:type="object">Magento\Payment\Gateway\Request\BuilderComposite</argument>
                 <argument name="handler" xsi:type="object">Magento\Payment\Gateway\Response\HandlerChain</argument>
                 <argument name="transferFactory" xsi:type="object">Magento\Payment\Gateway\Http\TransferFactoryInterface</argument>
             </arguments>
         </virtualType>
         <virtualType name="CurbstoneCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
             <arguments>
                 <argument name="commands" xsi:type="array">
                     <item name="capture" xsi:type="string">CurbstoneCaptureGatewayCommand</item>
                     <item name="authorize" xsi:type="string">CurbstoneCaptureGatewayCommand</item>
                 </argument>
             </arguments>
         </virtualType>

<!--    &lt;!&ndash;  Payment Method Facade configuration  &ndash;&gt;-->
<!--    <virtualType name="CurbstoneFacade" type="Magento\Payment\Model\Method\Adapter">-->
<!--        <arguments>-->
<!--            <argument name="code" xsi:type="const">Curbstone\IFrame\Model\Ui\ConfigProvider::CODE</argument>-->
<!--            <argument name="formBlockType" xsi:type="string">PayPal\Braintree\Block\Form</argument>-->
<!--            <argument name="infoBlockType" xsi:type="string">PayPal\Braintree\Block\Info</argument>-->
<!--            <argument name="valueHandlerPool" xsi:type="object">BraintreeValueHandlerPool</argument>-->
<!--            <argument name="validatorPool" xsi:type="object">BraintreeValidatorPool</argument>-->
<!--            <argument name="commandPool" xsi:type="object">BraintreeCommandPool</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
    <!--  Configuration for Vault payments  -->
    <virtualType name="CurbstoneVaultPaymentConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Curbstone\IFrame\Model\Ui\ConfigProvider::VAULT_CODE</argument>
        </arguments>
    </virtualType>
    <virtualType name="CurbstoneVaultPaymentValueHandler" type="VaultPaymentDefaultValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">CurbstoneVaultPaymentConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="CurbstoneVaultPaymentValueHandlerPool" type="VaultPaymentValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">CurbstoneVaultPaymentValueHandler</item>
                <item name="can_void" xsi:type="string">Magento\Payment\Gateway\Config\ConfigValueHandler</item>
                <item name="can_cancel" xsi:type="string">Magento\Payment\Gateway\Config\ConfigValueHandler</item>
                <item name="can_capture" xsi:type="string">Magento\Payment\Gateway\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="CurbstoneCreditCardVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="config" xsi:type="object">CurbstoneVaultPaymentConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">CurbstoneVaultPaymentValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">CurbstoneFacade</argument>
            <argument name="code" xsi:type="const">Curbstone\IFrame\Model\Ui\ConfigProvider::VAULT_CODE</argument>
        </arguments>
    </virtualType>
    <!--  END Configuration for Vault payments  -->

<!--    &lt;!&ndash;  Configuration reader  &ndash;&gt;-->
<!--    <type name="PayPal\Braintree\Gateway\Config\Config">-->
<!--        <arguments>-->
<!--            <argument name="methodCode" xsi:type="const">PayPal\Braintree\Model\Ui\ConfigProvider::CODE</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <type name="PayPal\Braintree\Gateway\Config\PayPal\Config">-->
<!--        <arguments>-->
<!--            <argument name="methodCode" xsi:type="const">PayPal\Braintree\Model\Ui\PayPal\ConfigProvider::PAYPAL_CODE</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    &lt;!&ndash;  Logger, initialized with BraintreeConfig  &ndash;&gt;-->
<!--    <virtualType name="BraintreeLoggerForTransactionSale" type="Magento\Payment\Model\Method\Logger">-->
<!--        <arguments>-->
<!--            <argument name="config" xsi:type="object">PayPal\Braintree\Gateway\Config\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <type name="PayPal\Braintree\Gateway\Http\Client\TransactionSale">-->
<!--        <arguments>-->
<!--            <argument name="customLogger" xsi:type="object">BraintreeLoggerForTransactionSale</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <type name="PayPal\Braintree\Gateway\Http\Client\TransactionSubmitForSettlement">-->
<!--        <arguments>-->
<!--            <argument name="customLogger" xsi:type="object">BraintreeLoggerForTransactionSale</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <type name="PayPal\Braintree\Gateway\Http\Client\TransactionRefund">-->
<!--        <arguments>-->
<!--            <argument name="customLogger" xsi:type="object">BraintreeLoggerForTransactionSale</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <type name="PayPal\Braintree\Gateway\Http\Client\TransactionVoid">-->
<!--        <arguments>-->
<!--            <argument name="customLogger" xsi:type="object">BraintreeLoggerForTransactionSale</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    &lt;!&ndash;  END Logger, initialized with BraintreeConfig  &ndash;&gt;-->
<!--    &lt;!&ndash;  Commands infrastructure  &ndash;&gt;-->
<!--    <virtualType name="BraintreeCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">-->
<!--        <arguments>-->
<!--            <argument name="commands" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreeAuthorizeCommand</item>-->
<!--                <item name="sale" xsi:type="string">BraintreeSaleCommand</item>-->
<!--                <item name="capture" xsi:type="string">BraintreeCaptureStrategyCommand</item>-->
<!--                <item name="settlement" xsi:type="string">BraintreeCaptureCommand</item>-->
<!--                <item name="vault_authorize" xsi:type="string">BraintreeVaultAuthorizeCommand</item>-->
<!--                <item name="vault_sale" xsi:type="string">BraintreeVaultSaleCommand</item>-->
<!--                <item name="vault_capture" xsi:type="string">BraintreeVaultCaptureCommand</item>-->
<!--                <item name="void" xsi:type="string">BraintreeVoidCommand</item>-->
<!--                <item name="refund" xsi:type="string">BraintreeRefundCommand</item>-->
<!--                <item name="cancel" xsi:type="string">BraintreeVoidCommand</item>-->
<!--                <item name="deny_payment" xsi:type="string">BraintreeVoidCommand</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">-->
<!--        <arguments>-->
<!--            <argument name="commands" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreePayPalAuthorizeCommand</item>-->
<!--                <item name="sale" xsi:type="string">BraintreePayPalSaleCommand</item>-->
<!--                <item name="capture" xsi:type="string">BraintreePayPalCaptureStrategyCommand</item>-->
<!--                <item name="settlement" xsi:type="string">BraintreeCaptureCommand</item>-->
<!--                <item name="vault_authorize" xsi:type="string">BraintreePayPalVaultAuthorizeCommand</item>-->
<!--                <item name="vault_sale" xsi:type="string">BraintreePayPalVaultSaleCommand</item>-->
<!--                <item name="vault_capture" xsi:type="string">BraintreeVaultCaptureCommand</item>-->
<!--                <item name="void" xsi:type="string">BraintreeVoidCommand</item>-->
<!--                <item name="refund" xsi:type="string">BraintreeRefundCommand</item>-->
<!--                <item name="cancel" xsi:type="string">BraintreeVoidCommand</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeCaptureStrategyCommand" type="PayPal\Braintree\Gateway\Command\CaptureStrategyCommand">-->
<!--        <arguments>-->
<!--            <argument name="commandPool" xsi:type="object">BraintreeCommandPool</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalCaptureStrategyCommand" type="PayPal\Braintree\Gateway\Command\CaptureStrategyCommand">-->
<!--        <arguments>-->
<!--            <argument name="commandPool" xsi:type="object">BraintreePayPalCommandPool</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END Commands infrastructure  &ndash;&gt;-->
<!--    &lt;!&ndash;  Command managers section for Vault  &ndash;&gt;-->
<!--    <virtualType name="BraintreeCommandManager" type="Magento\Payment\Gateway\Command\CommandManager">-->
<!--        <arguments>-->
<!--            <argument name="commandPool" xsi:type="object">BraintreeCommandPool</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalCommandManager" type="Magento\Payment\Gateway\Command\CommandManager">-->
<!--        <arguments>-->
<!--            <argument name="commandPool" xsi:type="object">BraintreePayPalCommandPool</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">-->
<!--        <arguments>-->
<!--            <argument name="executors" xsi:type="array">-->
<!--                <item name="braintree" xsi:type="string">BraintreeCommandManager</item>-->
<!--                <item name="braintree_paypal" xsi:type="string">BraintreePayPalCommandManager</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    &lt;!&ndash;  END command managers section for Vault  &ndash;&gt;-->
<!--    &lt;!&ndash;  Braintree commands   &ndash;&gt;-->
<!--    <virtualType name="BraintreeAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeAuthorizeRequest</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionSale</argument>-->
<!--            <argument name="handler" xsi:type="object">BraintreeAuthorizationHandler</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\ResponseValidator</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeAuthorizeRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="customer" xsi:type="string">PayPal\Braintree\Gateway\Request\CustomerDataBuilder</item>-->
<!--                <item name="payment" xsi:type="string">PayPal\Braintree\Gateway\Request\PaymentDataBuilder</item>-->
<!--                <item name="channel" xsi:type="string">PayPal\Braintree\Gateway\Request\ChannelDataBuilder</item>-->
<!--                <item name="address" xsi:type="string">PayPal\Braintree\Gateway\Request\AddressDataBuilder</item>-->
<!--                <item name="vault" xsi:type="string">PayPal\Braintree\Gateway\Request\VaultDataBuilder</item>-->
<!--                <item name="3dsecure" xsi:type="string">PayPal\Braintree\Gateway\Request\ThreeDSecureDataBuilder</item>-->
<!--                <item name="device_data" xsi:type="string">PayPal\Braintree\Gateway\Request\KountPaymentDataBuilder</item>-->
<!--                <item name="dynamic_descriptor" xsi:type="string">PayPal\Braintree\Gateway\Request\DescriptorDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Authorization&Capture command   &ndash;&gt;-->
<!--    <virtualType name="BraintreeSaleCommand" type="BraintreeAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeSaleRequest</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeSaleRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreeAuthorizeRequest</item>-->
<!--                <item name="settlement" xsi:type="string">PayPal\Braintree\Gateway\Request\SettlementDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Capture commands   &ndash;&gt;-->
<!--    <virtualType name="BraintreeCaptureCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeCaptureRequest</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionSubmitForSettlement</argument>-->
<!--            <argument name="handler" xsi:type="object">PayPal\Braintree\Gateway\Response\TransactionIdHandler</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\ResponseValidator</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeCaptureRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="capture" xsi:type="string">PayPal\Braintree\Gateway\Request\CaptureDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Vault Authorization command  &ndash;&gt;-->
<!--    <virtualType name="BraintreeVaultAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeVaultAuthorizeRequest</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionSale</argument>-->
<!--            <argument name="handler" xsi:type="object">BraintreeVaultResponseHandler</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\ResponseValidator</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeVaultAuthorizeRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="customer" xsi:type="string">PayPal\Braintree\Gateway\Request\CustomerDataBuilder</item>-->
<!--                <item name="payment" xsi:type="string">PayPal\Braintree\Gateway\Request\PaymentDataBuilder</item>-->
<!--                <item name="channel" xsi:type="string">PayPal\Braintree\Gateway\Request\ChannelDataBuilder</item>-->
<!--                <item name="address" xsi:type="string">PayPal\Braintree\Gateway\Request\AddressDataBuilder</item>-->
<!--                <item name="3dsecure" xsi:type="string">PayPal\Braintree\Gateway\Request\ThreeDSecureDataBuilder</item>-->
<!--                <item name="device_data" xsi:type="string">PayPal\Braintree\Gateway\Request\KountPaymentDataBuilder</item>-->
<!--                <item name="dynamic_descriptor" xsi:type="string">PayPal\Braintree\Gateway\Request\DescriptorDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Vault Authorization&Capture command  &ndash;&gt;-->
<!--    <virtualType name="BraintreeVaultSaleCommand" type="BraintreeVaultAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeVaultSaleRequest</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeVaultSaleRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreeVaultAuthorizeRequest</item>-->
<!--                <item name="settlement" xsi:type="string">PayPal\Braintree\Gateway\Request\SettlementDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Vault Capture (Sale actually) command  &ndash;&gt;-->
<!--    <virtualType name="BraintreeVaultCaptureCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreeVaultCaptureRequest</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionSale</argument>-->
<!--            <argument name="handler" xsi:type="object">PayPal\Braintree\Gateway\Response\TransactionIdHandler</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\ResponseValidator</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeVaultCaptureRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="vault_capture" xsi:type="string">PayPal\Braintree\Gateway\Request\VaultCaptureDataBuilder</item>-->
<!--                <item name="settlement" xsi:type="string">PayPal\Braintree\Gateway\Request\SettlementDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END Braintree commands   &ndash;&gt;-->
<!--    &lt;!&ndash;  PayPal commands  &ndash;&gt;-->
<!--    <virtualType name="BraintreePayPalAuthorizeCommand" type="BraintreeAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreePayPalAuthorizeRequest</argument>-->
<!--            <argument name="handler" xsi:type="object">BraintreePayPalResponseHandler</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalAuthorizeRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="customer" xsi:type="string">PayPal\Braintree\Gateway\Request\CustomerDataBuilder</item>-->
<!--                <item name="payment" xsi:type="string">PayPal\Braintree\Gateway\Request\PaymentDataBuilder</item>-->
<!--                <item name="channel" xsi:type="string">PayPal\Braintree\Gateway\Request\ChannelDataBuilder</item>-->
<!--                <item name="vault" xsi:type="string">PayPal\Braintree\Gateway\Request\PayPal\VaultDataBuilder</item>-->
<!--                <item name="device_data" xsi:type="string">PayPal\Braintree\Gateway\Request\PayPal\DeviceDataBuilder</item>-->
<!--                <item name="dynamic_descriptor" xsi:type="string">PayPal\Braintree\Gateway\Request\DescriptorDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  PayPal Authorization&Capture command  &ndash;&gt;-->
<!--    <virtualType name="BraintreePayPalSaleCommand" type="BraintreePayPalAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreePayPalSaleRequest</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalSaleRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreePayPalAuthorizeRequest</item>-->
<!--                <item name="settlement" xsi:type="string">PayPal\Braintree\Gateway\Request\SettlementDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  PayPal Vault Authorization command  &ndash;&gt;-->
<!--    <virtualType name="BraintreePayPalVaultAuthorizeCommand" type="BraintreeVaultAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreePayPalVaultAuthorizeRequest</argument>-->
<!--            <argument name="handler" xsi:type="object">BraintreePayPalVaultResponseHandler</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalVaultAuthorizeRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="customer" xsi:type="string">PayPal\Braintree\Gateway\Request\CustomerDataBuilder</item>-->
<!--                <item name="payment" xsi:type="string">PayPal\Braintree\Gateway\Request\PaymentDataBuilder</item>-->
<!--                <item name="channel" xsi:type="string">PayPal\Braintree\Gateway\Request\ChannelDataBuilder</item>-->
<!--                <item name="address" xsi:type="string">PayPal\Braintree\Gateway\Request\AddressDataBuilder</item>-->
<!--                <item name="dynamic_descriptor" xsi:type="string">PayPal\Braintree\Gateway\Request\DescriptorDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Vault Authorization&Capture command  &ndash;&gt;-->
<!--    <virtualType name="BraintreePayPalVaultSaleCommand" type="BraintreePayPalVaultAuthorizeCommand">-->
<!--        <arguments>-->
<!--            <argument name="requestBuilder" xsi:type="object">BraintreePayPalVaultSaleRequest</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalVaultSaleRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">-->
<!--        <arguments>-->
<!--            <argument name="builders" xsi:type="array">-->
<!--                <item name="authorize" xsi:type="string">BraintreePayPalVaultAuthorizeRequest</item>-->
<!--                <item name="settlement" xsi:type="string">PayPal\Braintree\Gateway\Request\SettlementDataBuilder</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END PayPal commands  &ndash;&gt;-->
<!--    &lt;!&ndash;  Value handlers infrastructure  &ndash;&gt;-->
<!--    <type name="PayPal\Braintree\Gateway\Response\VaultDetailsHandler">-->
<!--        <arguments>-->
<!--            <argument name="paymentTokenFactory" xsi:type="object">Magento\Vault\Model\PaymentTokenFactory</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <virtualType name="BraintreeValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="default" xsi:type="string">BraintreeConfigValueHandler</item>-->
<!--                <item name="can_void" xsi:type="string">PayPal\Braintree\Gateway\Config\CanVoidHandler</item>-->
<!--                <item name="can_cancel" xsi:type="string">PayPal\Braintree\Gateway\Config\CanVoidHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">-->
<!--        <arguments>-->
<!--            <argument name="configInterface" xsi:type="object">PayPal\Braintree\Gateway\Config\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeAuthorizationHandler" type="Magento\Payment\Gateway\Response\HandlerChain">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="payment_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PaymentDetailsHandler</item>-->
<!--                <item name="txn_id" xsi:type="string">PayPal\Braintree\Gateway\Response\TransactionIdHandler</item>-->
<!--                <item name="card_details" xsi:type="string">PayPal\Braintree\Gateway\Response\CardDetailsHandler</item>-->
<!--                <item name="risk_data" xsi:type="string">PayPal\Braintree\Gateway\Response\RiskDataHandler</item>-->
<!--                <item name="vault_details" xsi:type="string">PayPal\Braintree\Gateway\Response\VaultDetailsHandler</item>-->
<!--                <item name="3d_secure" xsi:type="string">PayPal\Braintree\Gateway\Response\ThreeDSecureDetailsHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeVaultResponseHandler" type="Magento\Payment\Gateway\Response\HandlerChain">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="payment_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PaymentDetailsHandler</item>-->
<!--                <item name="txn_id" xsi:type="string">PayPal\Braintree\Gateway\Response\TransactionIdHandler</item>-->
<!--                <item name="card_details" xsi:type="string">PayPal\Braintree\Gateway\Response\CardDetailsHandler</item>-->
<!--                <item name="risk_data" xsi:type="string">PayPal\Braintree\Gateway\Response\RiskDataHandler</item>-->
<!--                <item name="3d_secure" xsi:type="string">PayPal\Braintree\Gateway\Response\ThreeDSecureDetailsHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END Value handlers infrastructure  &ndash;&gt;-->
<!--    &lt;!&ndash;  PayPal value handlers infrastructure  &ndash;&gt;-->
<!--    <type name="PayPal\Braintree\Gateway\Response\PayPal\VaultDetailsHandler">-->
<!--        <arguments>-->
<!--            <argument name="paymentTokenFactory" xsi:type="object">Magento\Vault\Model\PaymentTokenFactory</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <virtualType name="BraintreePayPalValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="default" xsi:type="string">BraintreePayPalConfigValueHandler</item>-->
<!--                <item name="can_void" xsi:type="string">PayPal\Braintree\Gateway\Config\CanVoidHandler</item>-->
<!--                <item name="can_cancel" xsi:type="string">PayPal\Braintree\Gateway\Config\CanVoidHandler</item>-->
<!--                <item name="can_capture" xsi:type="string">PayPal\Braintree\Gateway\Config\CanVoidHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">-->
<!--        <arguments>-->
<!--            <argument name="configInterface" xsi:type="object">PayPal\Braintree\Gateway\Config\PayPal\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalResponseHandler" type="Magento\Payment\Gateway\Response\HandlerChain">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="payment_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PaymentDetailsHandler</item>-->
<!--                <item name="txn_id" xsi:type="string">PayPal\Braintree\Gateway\Response\TransactionIdHandler</item>-->
<!--                <item name="paypal_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PayPalDetailsHandler</item>-->
<!--                <item name="vault_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PayPal\VaultDetailsHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalVaultResponseHandler" type="Magento\Payment\Gateway\Response\HandlerChain">-->
<!--        <arguments>-->
<!--            <argument name="handlers" xsi:type="array">-->
<!--                <item name="payment_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PaymentDetailsHandler</item>-->
<!--                <item name="txn_id" xsi:type="string">PayPal\Braintree\Gateway\Response\TransactionIdHandler</item>-->
<!--                <item name="paypal_details" xsi:type="string">PayPal\Braintree\Gateway\Response\PayPalDetailsHandler</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END PayPal value handlers infrastructure  &ndash;&gt;-->
<!--    &lt;!&ndash;  Void Command  &ndash;&gt;-->
<!--    <virtualType name="BraintreeVoidCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionVoid</argument>-->
<!--            <argument name="requestBuilder" xsi:type="object">PayPal\Braintree\Gateway\Request\VoidDataBuilder</argument>-->
<!--            <argument name="handler" xsi:type="object">PayPal\Braintree\Gateway\Response\VoidHandler</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\GeneralResponseValidator</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Refund Command  &ndash;&gt;-->
<!--    <virtualType name="BraintreeRefundCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">-->
<!--        <arguments>-->
<!--            <argument name="client" xsi:type="object">PayPal\Braintree\Gateway\Http\Client\TransactionRefund</argument>-->
<!--            <argument name="requestBuilder" xsi:type="object">PayPal\Braintree\Gateway\Request\RefundDataBuilder</argument>-->
<!--            <argument name="validator" xsi:type="object">PayPal\Braintree\Gateway\Validator\GeneralResponseValidator</argument>-->
<!--            <argument name="handler" xsi:type="object">PayPal\Braintree\Gateway\Response\RefundHandler</argument>-->
<!--            <argument name="transferFactory" xsi:type="object">PayPal\Braintree\Gateway\Http\TransferFactory</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Braintree validators infrastructure  &ndash;&gt;-->
<!--    <virtualType name="BraintreeCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">-->
<!--        <arguments>-->
<!--            <argument name="config" xsi:type="object">PayPal\Braintree\Gateway\Config\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">-->
<!--        <arguments>-->
<!--            <argument name="validators" xsi:type="array">-->
<!--                <item name="country" xsi:type="string">BraintreeCountryValidator</item>-->
<!--                <item name="availability" xsi:type="string">Curbstone\IFrame\Gateway\Validator\AvailabilityValidator</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Braintree validators infrastructure  &ndash;&gt;-->
<!--    &lt;!&ndash;  Braintree PayPal validators  &ndash;&gt;-->
<!--    <virtualType name="BraintreePayPalCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">-->
<!--        <arguments>-->
<!--            <argument name="config" xsi:type="object">PayPal\Braintree\Gateway\Config\PayPal\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreePayPalValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">-->
<!--        <arguments>-->
<!--            <argument name="validators" xsi:type="array">-->
<!--                <item name="country" xsi:type="string">BraintreePayPalCountryValidator</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  END Braintree PayPal validators  &ndash;&gt;-->
<!--    <type name="PayPal\Braintree\Block\Info">-->
<!--        <arguments>-->
<!--            <argument name="config" xsi:type="object">PayPal\Braintree\Gateway\Config\Config</argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    <virtualType name="BraintreePayPalInfo" type="PayPal\Braintree\Block\Info">-->
<!--        <arguments>-->
<!--            <argument name="config" xsi:type="object">PayPal\Braintree\Gateway\Config\PayPal\Config</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    &lt;!&ndash;  Settlement Report Section  &ndash;&gt;-->
<!--    <virtualType name="BraintreeTransactionsCollectionFactoryForReporting" type="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">-->
<!--        <arguments>-->
<!--            <argument name="collections" xsi:type="array">-->
<!--                <item name="braintree_report_data_source" xsi:type="string">PayPal\Braintree\Model\Report\TransactionsCollection</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeTransactionsReporting" type="Magento\Framework\View\Element\UiComponent\DataProvider\Reporting">-->
<!--        <arguments>-->
<!--            <argument name="collectionFactory" xsi:type="object">BraintreeTransactionsCollectionFactoryForReporting</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <virtualType name="BraintreeTransactionsDataProvider" type="Magento\Framework\View\Element\UiComponent\DataProvider\DataProvider">-->
<!--        <arguments>-->
<!--            <argument name="reporting" xsi:type="object">BraintreeTransactionsReporting</argument>-->
<!--        </arguments>-->
<!--    </virtualType>-->
<!--    <type name="PayPal\Braintree\Model\Report\ConditionAppliers\AppliersPool">-->
<!--        <arguments>-->
<!--            <argument name="appliers" xsi:type="array">-->
<!--                <item name="Braintree\TextNode" xsi:type="object">PayPal\Braintree\Model\Report\ConditionAppliers\Text</item>-->
<!--                <item name="Braintree\RangeNode" xsi:type="object">PayPal\Braintree\Model\Report\ConditionAppliers\Range</item>-->
<!--                <item name="Braintree\MultipleValueNode" xsi:type="object">PayPal\Braintree\Model\Report\ConditionAppliers\MultipleValue</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </type>-->
<!--    &lt;!&ndash;  END Settlement Report Section  &ndash;&gt;-->
<!--    <type name="Magento\Config\Model\Config\Export\ExcludeList">-->
<!--        <arguments>-->
<!--            <argument name="configs" xsi:type="array">-->
<!--                <item name="payment/braintree/merchant_id" xsi:type="string">1</item>-->
<!--                <item name="payment/braintree/public_key" xsi:type="string">1</item>-->
<!--                <item name="payment/braintree/private_key" xsi:type="string">1</item>-->
<!--                <item name="payment/braintree/merchant_account_id" xsi:type="string">1</item>-->
<!--                <item name="payment/braintree/kount_id" xsi:type="string">1</item>-->
<!--                <item name="payment/braintree_paypal/merchant_name_override" xsi:type="string">1</item>-->
<!--            </argument>-->
<!--        </arguments>-->
<!--    </type>-->
</config>
